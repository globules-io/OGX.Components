/* OGX.JS FlexCells@1.3.4 */
require("FlexCells","Uxi","Template","Touch","Placeholder");OGX.FlexCells=function(d){construct(this,"FlexCells");"use strict";var o=this;var e={axis:"x",min:10,template:null,auto_hide:true,children:["50%","30%","20%"]};var h=OGX.Data.merge(d,e,false);var _=this.el;var u={x:0,y:0,m:0};var v=null;this.construct=function(){};this.cellSize=function(s,e){if(typeof s==="undefined"){var i=[];this.el.children(".ogx_flex_cell").each((e,l)=>{i.push($(l).css("flex-basis"))});return i}var l,a;if(Array.isArray(s)){var t;this.el.children(".ogx_flex_cell").each((e,l)=>{t=$(l);t.css("flex-basis",s[e])})}else{typeof e==="string"?e=Number(e.replace("%","")):null;var r,c;l=this.el.children('.ogx_flex_cell[data-cell="'+s+'"]');if(s<this.el.children(".ogx_flex_cell").length-1){a=this.el.children('.ogx_flex_cell[data-cell="'+(s+1)+'"]')}else{a=this.el.children('.ogx_flex_cell[data-cell="'+(s-1)+'"]')}r=e-Number(l.css("flex-basis").split("%").shift());c=Number(a.css("flex-basis").split("%").shift())-r;l.css("flex-basis",e+"%");a.css("flex-basis",c+"%")}if(h.auto_hide){setTimeout(()=>{n()},300)}setTimeout(()=>o.resizeNodes(),5)};this.renderAt=function(e,l){this.clearAt(e);l=OGX.OML.rename(l,'.ogx_flex_cells[data-ogx-id="'+this.id+'"] > .ogx_flex_cell[data-cell="'+e+'"]');h["node:OML"].push(l);OGX.OML.render(this,l)};this.clearAt=function(e){var s,i;this.el.children('.ogx_flex_cell[data-cell="'+e+'"]').find(".ogx_uxi").each(function(e,l){s=$(l).data("ogx-id");i=o.find(null,s);if(i){i.kill()}})};function n(){var s=o.el.children(".ogx_flex_cell_resize");s.each((e,l)=>{if(e<s.length){el=$(l);cellA=el.prev().css("flex-basis");cellB=el.next().css("flex-basis");if([0,"0%"].includes(cellA)||[0,"0%"].includes(cellB)){el.addClass("ogx_flex_resize_hidden")}else{el.removeClass("ogx_flex_resize_hidden")}}})}function l(){var e="";for(var l=0;l<h.children.length;l++){e+='<span class="ogx_flex_cell" data-cell="'+l+'" style="flex-basis:'+h.children[l]+'"></span>';if(l<h.children.length-1){e+='<span class="ogx_flex_cell_resize"></span>'}}_.html(e)}function s(e){v=$(e.target);u.x=0;u.y=0;u.m=0}function i(e){var l;var s=_.width();if(d.axis==="x"){l=(e.distX-u.m)*100/s;u.m=e.distX}else{l=(e.distY-u.m)*100/_.height();u.m=e.distY}var i=Number(v.prev().css("flex-basis").split("%")[0]);var a=Number(v.next().css("flex-basis").split("%")[0]);var t=v.prev();var r=v.next();var c,n;if(Array.isArray(h.min)){var x=t.data("cell");var f=r.data("cell");c=h.min[x];n=h.min[f]}else{c=n=h.min}if(!isNaN(c)){c=c*100/s}else{c=Number(c.replace("%",""))}if(!isNaN(n)){n=n*100/s}else{n=Number(n.replace("%",""))}if(i+l>c&&a-l>n){v.prev().css("flex-basis",i+l+"%");v.next().css("flex-basis",a-l+"%");o.el.trigger(OGX.FlexCells.RESIZE);setTimeout(()=>o.resizeNodes(),5)}}function a(){var e={id:"move",min:0,target:".ogx_flex_cell_resize",cb_down:s,cb_move:i,capture:true};if(h.axis==="x"){e.x=true}else{e.y=true}o.touch.add("Move",e)}function t(){var e=_.children();var s=e.length;e.each(function(e,l){$(l).addClass("ogx_flex_cell").attr("data-cell",e).css("flex-basis",h.children[e]);if(e<s-1){$(l).after('<span class="ogx_flex_cell_resize"></span>')}})}function r(){var e=_.parent().children().not(".ogx_flex_cells");var l=e.clone();var s=e.length;var i;_.append(e);l.each(function(e,l){i=$(l);i.remove()});return s}function c(){var e=[];for(var l=0;l<h["node:OML"].length;l++){e.push('.ogx_flex_cells[data-ogx-id="'+o.id+'"] > .ogx_flex_cell[data-cell="'+l+'"]')}o.placeholders(h,e)}function x(){_.addClass("ogx_flex_cells");if(h.axis==="x"){_.addClass("ogx_flex_cells_row")}else{_.addClass("ogx_flex_cells_col")}var e=false;if(!h.template){e=r()}t();c();if(!h.template&&!e){l()}if(h.auto_hide){n()}a()}x()};OGX.FlexCells.RESIZE="FlexCellsResize";