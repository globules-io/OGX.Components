/* OGX.JS FlexCells@1.1.0 */
require("FlexCells","Uxi","Template","Touch","Placeholder");OGX.FlexCells=function(t){construct(this,"FlexCells");"use strict";var r=this;var e={axis:"x",min:10,template:null,children:["50%","30%","20%"]};var a=OGX.Data.merge(t,e,false);var c=this.el;var n={x:0,y:0,m:0};var x=null;this.construct=function(){};this.cellSize=function(e,l,s){if(typeof e==="undefined"){var i=[];this.el.children(".ogx_flex_cell").each((e,l)=>{i.push($(l).css("flex-basis"))});return i}var t,a,c,n;t=this.el.children('.ogx_flex_cell[data-cell="'+e+'"]');if(e<this.el.children(".ogx_flex_cell").length-1){a=this.el.children('.ogx_flex_cell[data-cell="'+(e+1)+'"]')}else{a=this.el.children('.ogx_flex_cell[data-cell="'+(e-1)+'"]')}c=l-Number(t.css("flex-basis").split("%").shift());n=Number(a.css("flex-basis").split("%").shift())-c;t.css("flex-basis",l+"%");a.css("flex-basis",n+"%");setTimeout(()=>r.resizeNodes,5)};this.renderAt=function(e,l){this.clearAt(e);l=OGX.OML.rename(l,'.ogx_flex_cells[data-ogx-id="'+this.id+'"] > .ogx_flex_cell[data-cell="'+e+'"]');a["node:OML"].push(l);OGX.OML.render(this,l)};this.clearAt=function(e){var s,i;this.el.children('.ogx_flex_cell[data-cell="'+e+'"]').find(".ogx_uxi").each(function(e,l){s=$(l).data("ogx-id");i=r.find(null,s);if(i){i.kill()}})};function l(){var e="";for(var l=0;l<a.children.length;l++){e+='<span class="ogx_flex_cell" data-cell="'+l+'" style="flex-basis:'+a.children[l]+'"></span>';if(l<a.children.length-1){e+='<span class="ogx_flex_cell_resize"></span>'}}c.html(e)}function s(e){x=$(e.target);n.x=0;n.y=0;n.m=0}function i(e){var l;if(t.axis==="x"){l=(e.distX-n.m)*100/c.width();n.m=e.distX}else{l=(e.distY-n.m)*100/c.height();n.m=e.distY}var s=Number(x.prev().css("flex-basis").split("%")[0]);var i=Number(x.next().css("flex-basis").split("%")[0]);if(s+l>a.min&&i-l>a.min){x.prev().css("flex-basis",s+l+"%");x.next().css("flex-basis",i-l+"%");setTimeout(()=>r.resizeNodes(),5)}}function f(){var e={id:"move",min:0,target:".ogx_flex_cell_resize",cb_down:s,cb_move:i,capture:true};if(a.axis==="x"){e.x=true}else{e.y=true}r.touch.add("Move",e)}function o(){var e=c.children();var s=e.length;e.each(function(e,l){$(l).addClass("ogx_flex_cell").attr("data-cell",e).css("flex-basis",a.children[e]);if(e<s-1){$(l).after('<span class="ogx_flex_cell_resize"></span>')}})}function d(){var e=[];for(var l=0;l<a["node:OML"].length;l++){for(var s in a["node:OML"][l]){e.push('.ogx_flex_cells[data-ogx-id="'+r.id+'"] > .ogx_flex_cell[data-cell="'+l+'"]')}}r.placeholders(a,e)}function h(){c.addClass("ogx_flex_cells");if(a.axis==="x"){c.addClass("ogx_flex_cells_row")}else{c.addClass("ogx_flex_cells_col")}if(a.template){o()}d();if(!a.template){l()}f()}h()};