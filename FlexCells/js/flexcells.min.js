/* OGX.JS FlexCells@1.4.0 */
require("FlexCells","Uxi","Template","Touch","Placeholder");OGX.FlexCells=function(o){construct(this,"FlexCells");"use strict";var d=this;var e={axis:"x",min:10,template:null,auto_hide:true,children:["50%","30%","20%"]};var _=OGX.Data.merge(o,e,false);var h=this.el;var u={x:0,y:0,m:0};var g=null;this.construct=function(){};this.cellSize=function(s,e){if(typeof s==="undefined"){var i=[];this.el.children(".ogx_flex_cell").each((e,l)=>{i.push($(l).css("flex-basis"))});return i}var l,a;if(Array.isArray(s)){var r;this.el.children(".ogx_flex_cell").each((e,l)=>{r=$(l);r.css("flex-basis",s[e])})}else{typeof e==="string"?e=Number(e.replace("%","")):null;var t,c;l=this.el.children('.ogx_flex_cell[data-cell="'+s+'"]');if(s<this.el.children(".ogx_flex_cell").length-1){a=this.el.children('.ogx_flex_cell[data-cell="'+(s+1)+'"]')}else{a=this.el.children('.ogx_flex_cell[data-cell="'+(s-1)+'"]')}t=e-Number(l.css("flex-basis").split("%").shift());c=Number(a.css("flex-basis").split("%").shift())-t;l.css("flex-basis",e+"%");a.css("flex-basis",c+"%")}if(_.auto_hide){setTimeout(()=>{n()},300)}setTimeout(()=>d.resizeNodes(),5)};this.renderAt=function(e,l){this.clearAt(e);l=OGX.OML.rename(l,'.ogx_flex_cells[data-ogx-id="'+this.id+'"] > .ogx_flex_cell[data-cell="'+e+'"]');_["node:OML"].push(l);OGX.OML.render(this,l)};this.clearAt=function(e){var s,i;this.el.children('.ogx_flex_cell[data-cell="'+e+'"]').find(".ogx_uxi").each(function(e,l){s=$(l).data("ogx-id");i=d.find(null,s);if(i){i.kill()}})};this.flatten=function(e){if(e){d.el.children(".ogx_flex_cell_resize").addClass("ogx_flex_resize_hidden");d.el.addClass("ogx_flex_cells_col").removeClass("ogx_flex_cells_row")}else{d.el.children(".ogx_flex_cell_resize").removeClass("ogx_flex_resize_hidden");d.el.addClass("ogx_flex_cells_row").removeClass("ogx_flex_cells_col")}};function n(){var s=d.el.children(".ogx_flex_cell_resize");s.each((e,l)=>{if(e<s.length){el=$(l);cellA=el.prev().css("flex-basis");cellB=el.next().css("flex-basis");if([0,"0%"].includes(cellA)||[0,"0%"].includes(cellB)){el.addClass("ogx_flex_resize_hidden")}else{el.removeClass("ogx_flex_resize_hidden")}}})}function l(){var e="";for(var l=0;l<_.children.length;l++){e+='<span class="ogx_flex_cell" data-cell="'+l+'" style="flex-basis:'+_.children[l]+'"></span>';if(l<_.children.length-1){e+='<span class="ogx_flex_cell_resize"></span>'}}h.html(e)}function s(e){g=$(e.target);u.x=0;u.y=0;u.m=0}function i(e){var l;var s=h.width();if(o.axis==="x"){l=(e.distX-u.m)*100/s;u.m=e.distX}else{l=(e.distY-u.m)*100/h.height();u.m=e.distY}var i=Number(g.prev().css("flex-basis").split("%")[0]);var a=Number(g.next().css("flex-basis").split("%")[0]);var r=g.prev();var t=g.next();var c,n;if(Array.isArray(_.min)){var x=r.data("cell");var f=t.data("cell");c=_.min[x];n=_.min[f]}else{c=n=_.min}if(!isNaN(c)){c=c*100/s}else{c=Number(c.replace("%",""))}if(!isNaN(n)){n=n*100/s}else{n=Number(n.replace("%",""))}if(i+l>c&&a-l>n){g.prev().css("flex-basis",i+l+"%");g.next().css("flex-basis",a-l+"%");d.el.trigger(OGX.FlexCells.RESIZE);setTimeout(()=>d.resizeNodes(),5)}}function a(){var e={id:"move",min:0,target:".ogx_flex_cell_resize",cb_down:s,cb_move:i,capture:true};if(_.axis==="x"){e.x=true}else{e.y=true}d.touch.add("Move",e)}function r(){var e=h.children();var s=e.length;e.each(function(e,l){$(l).addClass("ogx_flex_cell").attr("data-cell",e).css("flex-basis",_.children[e]);if(e<s-1){$(l).after('<span class="ogx_flex_cell_resize"></span>')}})}function t(){var e=h.parent().children().not(".ogx_flex_cells");var l=e.clone();var s=e.length;var i;h.append(e);l.each(function(e,l){i=$(l);i.remove()});return s}function c(){var e=[];for(var l=0;l<_["node:OML"].length;l++){e.push('.ogx_flex_cells[data-ogx-id="'+d.id+'"] > .ogx_flex_cell[data-cell="'+l+'"]')}d.placeholders(_,e)}function x(){h.addClass("ogx_flex_cells");if(_.axis==="x"){h.addClass("ogx_flex_cells_row")}else{h.addClass("ogx_flex_cells_col")}var e=false;if(!_.template){e=t()}r();c();if(!_.template&&!e){l()}if(_.auto_hide){n()}a()}x()};OGX.FlexCells.RESIZE="FlexCellsResize";