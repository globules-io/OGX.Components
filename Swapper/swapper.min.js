/* OGX.JS Swapper@1.0.1 */
require("Swapper","Uxi","Touch");OGX.Swapper=function(e){construct(this,"Swapper");"use strict";var i=this;var a={map:[true,true,true],cb_moved:null,cb_moving:null};var n=OGX.Data.merge(e,a,false);var o;var d=0;var l=0;var p=0;var c=false;var f=0;var u=1;var v=1;this.construct=function(){mw=this.el.width();this.touch.add("Move",{id:"band_move",x:true,y:false,min:0,cb_down:t,cb_up:s,cb_move:h,state:"manual",capture:false})};this.enable=function(){this.touch.enable()};this.disable=function(){this.touch.disable()};this.resize=function(){p=this.el.width();l=d=v*p;o.css({transform:"translateX("+l+"px)"})};this.onRender=function(e,a){};this.map=function(e){if(typeof e==="undefined"){return n.map}n.map=e;r()};this.move=function(e,a){h(e,a);d=l;c=false;f=0};this.done=function(){d=l;c=false;f=0};this.render=r;function r(){i.observeOnce(null,function(){o=i.el.children(".ogx_swapper_container");p=i.el.width();o.css({transform:"translateX("+-p+"px)"});v=-1;d=l=-p});var e='<div class="ogx_swapper_container"><div class="ogx_swapper_block" data-id="0">'+b(0,n.map[0],false)+'</div><div class="ogx_swapper_block" data-id="1">'+b(1,n.map[1],false)+'</div><div class="ogx_swapper_block" data-id="2">'+b(2,n.map[2],false)+"</div></div>";i.el.html(e)}function s(e){if(l){var a=Math.floor((f-(l-d))*-1);if(n.cb_moved){n.cb_moved({distX:a})}else{i.el.trigger(OGX.Swapper.MOVED,{distX:a})}}d=l;f=0;$("body").removeClass("ogx_swapper_grabbing");o.removeClass("ogx_swapper_grabbing")}function t(e){$("body").addClass("ogx_swapper_grabbing");o.addClass("ogx_swapper_grabbing");c=false}function h(e,a){var r=false;var s=0;var t;if(e.dirX===-1&&Math.abs(e.distX+d+f)>p+p/2&&c!==e.dirX){t=o.children(".ogx_swapper_block").first().detach();o.append(t);f+=p;c=e.dirX;u++;r=true}else{if(e.dirX===1&&Math.abs(e.distX+d+f)<p/2&&c!==e.dirX){t=o.children(".ogx_swapper_block").last().detach();o.prepend(t);f-=p;c=e.dirX;u--;r=true}}if(r){s=u-e.dirX;content=n.map[_(Math.abs(s))];b(s,content,t)}l=e.distX+d+f;v=l/p;o.css({transform:"translateX("+l+"px)"});typeof a!=="undefined"?e.data=a:null;if(n.cb_moving){n.cb_moving(e)}else{i.el.trigger(OGX.Swapper.MOVING,e)}}function b(e,a,r){var s=_(e);i.onRender(e,s);switch(typeof a){case"string":if(r){r.html(a)}else{return a}break;case"function":res=a({abs:e,rel:s});if(res){if(r){r.html(res)}else{return res}}break}}function _(e){var a=e%n.map.length;return a}function g(){i.el.addClass("ogx_swapper");r()}g()};OGX.Swapper.MOVING="swapperMoving";OGX.Swapper.MOVED="swapperMoved";